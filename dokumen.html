<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>QMS HKI | Dokumen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>

<body>

<!-- HEADER -->
<header class="top-header">
  <img src="assets/img/logo-hki.png" class="logo" alt="HKI Logo">
  <div>
    <h1>QMS HKI</h1>
    <p>Quality Management System</p>
  </div>
  <button id="logoutBtn" class="logout-btn">Logout</button>
</header>

<div class="layout">

<!-- SIDEBAR -->
<aside class="sidebar">
  <h3>Menu</h3>
  <a href="#A">Pendidikan & SDM</a>
  <a href="#B">Produksi & Proses</a>
  <a href="#C">Kualitas</a>
  <a href="#G">Manajemen Dokumen</a>
</aside>

<!-- CONTENT -->
<main class="content">

<input type="text" id="searchInput" placeholder="Cari dokumen (HSQ-xxx / judul)">

<section id="A" class="qms-section">
<h2>Pendidikan & SDM</h2>
<a onclick="openPDF('assets/pdf/A_Pendidikan/HSQ-001.pdf')">HSQ-001 â€“ Pendidikan / Pelatihan</a>
<a onclick="openPDF('assets/pdf/A_Pendidikan/HSQ-060.pdf')">HSQ-060 â€“ Pergantian Operator</a>
</section>

<section id="B" class="qms-section">
<h2>Produksi & Proses</h2>
<a onclick="openPDF('assets/pdf/B_Produksi/HSQ-010.pdf')">HSQ-010 â€“ Pengelolaan Jig</a>
<a onclick="openPDF('assets/pdf/B_Produksi/HSQ-020.pdf')">HSQ-020 â€“ Produk Awal</a>
<a onclick="openPDF('assets/pdf/B_Produksi/HSQ-021.pdf')">HSQ-021 â€“ Titik Perubahan</a>
</section>

<section id="C" class="qms-section">
<h2>Kualitas</h2>
<a onclick="openPDF('assets/pdf/C_Kualitas/HSQ-030.pdf')">HSQ-030 â€“ Tindakan Korektif</a>
<a onclick="openPDF('assets/pdf/C_Kualitas/HSQ-040.pdf')">HSQ-040 â€“ Mutu Internal</a>
</section>

<section id="G" class="qms-section">
<h2>Manajemen Dokumen</h2>
<a onclick="openPDF('assets/pdf/G_Manajemen_Dokumen/HS-001.pdf')">HS-001 â€“ Format Pedoman</a>
</section>

</main>

<!-- PDF VIEWER -->
<aside class="viewer">
  <p class="viewer-title">ðŸ“„ PDF Viewer</p>
  <iframe id="pdfViewer"></iframe>
</aside>

</div>

<!-- ðŸ” FIREBASE PROTEKSI & LOGOUT -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDh41eDkNZbKrYCAo8wOE0DEe0Uy0Z1uLA",
    authDomain: "qms-hki.firebaseapp.com",
    projectId: "qms-hki",
    storageBucket: "qms-hki.appspot.com",
    messagingSenderId: "718676500560",
    appId: "1:718676500560:web:4eb93417bd3f5c14d1f155"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // ðŸ”’ Proteksi halaman
  onAuthStateChanged(auth, user => {
    if (!user) {
      window.location.href = "login.html";
    }
  });

  // ðŸ”“ Logout
  document.getElementById("logoutBtn").addEventListener("click", () => {
    signOut(auth).then(() => {
      window.location.href = "login.html";
    });
  });
</script>

<script src="app.js"></script>
</body>
</html>
